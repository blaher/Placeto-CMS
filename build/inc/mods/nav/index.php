<?php function placeto_nav(){global $content,$prefix;$navrows=mysql_num_rows(mysql_query('SELECT * FROM '.$prefix.'mod_nav'));for($i=0;$i<$navrows;$i++){$nav[$i]=mysql_fetch_assoc(mysql_query('SELECT * FROM '.$prefix.'mod_nav WHERE id='.$i));}$navlist=$nav;for($i=0;$i<$navrows;$i++){$navorder[$navlist[$i]['id']]=$navlist[$i]['link'];}unset($navlist);function ascii_sort($val_1,$val_2){$retVal=0;$firstVal=strlen($val_1);$secondVal=strlen($val_2);if($firstVal>$secondVal){$retVal=1;}else if($firstVal<$secondVal){$retVal=-1;}unset($val_1,$val_2,$firstVal,$secondVal);return $retVal;}uasort($navorder,'ascii_sort');rsort($navorder);$navactive="";if($content['page']==='/'){$navactive='/';}else{foreach($navorder as $val){if($val!=='/'&&$val===substr($content['page'],0,strlen($val))){$navactive=$val;break;}}unset($val);}unset($navorder,$navlist);for($i=0;$i<$navrows;$i++){if($nav[$i]['link']===$navactive){echo '<li class="active"><a href=".',$nav[$i]['link'],'" rel="index">',$nav[$i]['title'],"</a></li>\n";}else{echo '<li><a href=".',$nav[$i]['link'],'" rel="bookmark">',$nav[$i]['title'],"</a></li>\n";}}unset($nav,$navactive,$i,$navrows);}?>